<!DOCTYPE html>
<html>
<head>
    <title>jsNet browser demo</title>
    <script src="dist/jsNetWebAssembly.min.js"></script>
    <script>
        // global.jsNetWASMPath = "./dist/NetWASM.wasm"
    </script>
    <script src="dist/NetWASM.js"></script>
    <!-- <script src="dist/jsNetJS.concat.js"></script> -->  <!-- Use this instead, when using the JavaScript version -->
    <script>
    "use strict"
    window.addEventListener("jsNetWASMLoaded", () => {
    // window.addEventListener("load", () => {      // Use this instead, when using the JavaScript version

        const xor = [
            {input: [0, 0], expected: [0]},
            {input: [0, 1], expected: [1]},
            {input: [1, 0], expected: [1]},
            {input: [1, 1], expected: [0]}
        ]

        console.log("Loaded jsNet. Starting training...")
        const start = Date.now()

        const net = new Network({
            Module: window.Module, // not needed if using the JavaScript version
            layers: [new FCLayer(2), new FCLayer(3), new FCLayer(1)]
        })

        net.train(xor, {epochs: 1000, log: false}).then(() => {
            console.log("Forward 0,0: ", net.forward(xor[0].input))
            console.log("Forward 0,1: ", net.forward(xor[1].input))
            console.log("Forward 1,0: ", net.forward(xor[2].input))
            console.log("Forward 1,1: ", net.forward(xor[3].input))
            console.log(`\n\nElapsed: ${Date.now()-start}ms`)
        })

    })
    </script>
</head>
<body>
Open the console to see logs.
</body>
</html>